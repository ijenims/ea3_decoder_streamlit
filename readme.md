
---

# 📊 EA3 File Decoder & Viewer

計測器（EddyStation等）が出力するバイナリ形式ファイル (`.ea3`) を解析し、**波形データの可視化**と**汎用CSV形式への変換**を行うWebアプリケーションです。

メーカー非公開の独自バイナリフォーマットを解析し、波形データだけでなく、埋め込まれたメタデータ（タイトル・コメント・サンプリングレート）の抽出にも対応しています。

## ✨ 主な機能

*   **📈 波形可視化 (Interactive)**
    *   Plotlyを使用したX-Yリサージュ波形の描画。
    *   ズーム、パン、データ点ホバー確認が可能。
*   **🛠️ 高精度デコード**
    *   **仕様書準拠**: 公式仕様に基づき、スケーリング（電圧変換）、サンプリング周波数、チャンネル情報を正確に取得。
    *   **独自解析補正**: 仕様書に記載のない「データ区切り文字 (`0x12345678`)」や「ヘッダ点数のズレ」を自動検知・補正し、文字化けやデータ破損を防ぎます。
*   **📄 メタデータ抽出**
    *   ファイル内部に記録された「タイトル」「コメント」「計測日時情報」を表示。
*   **💾 CSVエクスポート**
    *   純正ソフト互換（ACT001形式 / Shift-JIS）で出力可能。
    *   Excel等で即座に二次加工が可能です。

## 🚀 使い方 (Webアプリ)

### ローカル環境での実行

Python 3.11以上の環境が必要です。

**1. リポジトリのクローン**
```bash
git clone https://github.com/ijenims/ea3_decoder_streamlit.git
cd ea3_decoder_streamlit
```

**2. 環境構築 (Anaconda推奨)**
```bash
# 仮想環境の作成
conda create -n ea3-decoder python=3.11
conda activate ea3-decoder

# 依存ライブラリのインストール
pip install -r requirements.txt
```

**3. アプリの起動**
```bash
streamlit run app.py
```
ブラウザが自動的に立ち上がり、アプリが表示されます。サイドバーに `.ea3` ファイルをドラッグ＆ドロップして解析を開始してください。

## 📂 プロジェクト構成

```text
ea3_decoder_streamlit/
├── app.py                 # アプリケーション本体 (Streamlit UI)
├── src/
│   └── decoder.py         # バイナリ解析エンジン (仕様書+独自解析実装)
├── Eddys_EA3_format.md    # ファイルフォーマット詳細仕様書 (解析メモ)
├── requirements.txt       # 依存ライブラリ
└── README.md              # 本ファイル
```

## 📝 技術仕様 (解析ハイライト)

本ツールは、メーカー仕様書および実データのリバースエンジニアリング結果に基づき、以下の仕様でデコードを行います。
詳細は [Eddys_EA3_format.md](./Eddys_EA3_format.md) を参照してください。

*   **データ構造**: ヘッダー(256B) + 波形データ(Int16) + フッター(可変長テキスト)
*   **スケーリング**: $\text{Voltage} = \text{RawValue} / 3276.8$
*   **隠し仕様対応**:
    *   波形データとフッターの間に挿入されるマジックナンバー `0x12345678` を自動スキップ。
    *   ヘッダー記載のデータ点数から、区切り用ダミーデータの1点を除外して処理。

## ⚠️ 免責事項

*   本ソフトウェアは独自に開発された解析ツールであり、計測器メーカーの公式製品ではありません。
*   本ツールを使用した結果（データの正確性、欠損等）について、開発者は責任を負いかねます。重要な計測データの変換には十分な検証を行ってください。

## License

MIT License